nameOverride: ""
fullnameOverride: "rag-server"

# Feature flag with global fallback (global.rag.enableGraphRag)
enableGraphRag: true

image:
  repository: "ghcr.io/cnoe-io/caipe-rag-server"
  # tag defaults to .Chart.AppVersion when not specified
  tag: ""
  pullPolicy: IfNotPresent

replicaCount: 1

# This sets the number of old ReplicaSets to retain for rollback
# Kubernetes will automatically clean up ReplicaSets beyond this limit
revisionHistoryLimit: 3

# Environment variables for rag-server container
# All application configuration goes here
env: {}
  # Feature Flags
  # ENABLE_MCP: "true"
  # SKIP_INIT_TESTS: "false"
  #
  # Embeddings Configuration
  # EMBEDDINGS_PROVIDER: "azure-openai"  # Options: azure-openai, openai, litellm
  # EMBEDDINGS_MODEL: "text-embedding-3-small"
  # LITELLM_API_BASE: "http://litellm-proxy:4000"  # Required when using litellm provider
  #
  # Performance & Limits
  # MAX_DOCUMENTS_PER_INGEST: "1000"
  # MAX_RESULTS_PER_QUERY: "100"
  # MAX_INGESTION_CONCURRENCY: "30"
  # MAX_GRAPH_RAW_QUERY_RESULTS: "100"
  # MAX_GRAPH_RAW_QUERY_TOKENS: "80000"
  # SEARCH_RESULT_TRUNCATE_LENGTH: "500"
  #
  # General Settings
  # LOG_LEVEL: "INFO"  # Options: DEBUG, INFO, WARNING, ERROR
  # UI_URL: "http://localhost:9447"
  # SLEEP_ON_INIT_FAILURE_SECONDS: "180"
  # CLEANUP_INTERVAL: "86400"
  #
  # RBAC/Authentication (when using OAuth2 Proxy)
  # ALLOW_UNAUTHENTICATED: "true"
  # RBAC_READONLY_GROUPS: ""
  # RBAC_INGESTONLY_GROUPS: ""
  # RBAC_ADMIN_GROUPS: ""
  # RBAC_DEFAULT_ROLE: "readonly"

# Additional envFrom references (secrets, configmaps)
envFrom: []

# Web Ingestor configuration (runs as sidecar container)
webIngestor:
  enabled: true
  image:
    repository: "ghcr.io/cnoe-io/caipe-rag-ingestors"
    # tag defaults to .Chart.AppVersion when not specified
    tag: ""
    pullPolicy: IfNotPresent

  # Environment variables for web-ingestor container
  env: {}
    # LOG_LEVEL: "INFO"
    # WEBLOADER_MAX_CONCURRENCY: "10"
    # WEBLOADER_MAX_INGESTION_TASKS: "5"
    # WEBLOADER_RELOAD_INTERVAL: "86400"
    #
    # Scrapy settings (optional)
    # SCRAPY_CONCURRENT_REQUESTS: "16"
    # SCRAPY_DOWNLOAD_DELAY: "0"
    # SCRAPY_DEPTH_LIMIT: "0"
    # SCRAPY_JAVASCRIPT_ENABLED: "false"

  # Additional envFrom references (secrets, configmaps)
  envFrom: []

  # Resource limits for the web ingestor sidecar
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
      ephemeral-storage: 256Mi
    limits:
      cpu: 500m
      memory: 1Gi
      ephemeral-storage: 1Gi

serviceAccount:
  create: false
  name: ""
  automount: false
  annotations: {}

service:
  type: ClusterIP
  port: 9446

resources: {}

nodeSelector: {}

tolerations: []

affinity: {}

podAnnotations: {}
podLabels: {}

imagePullSecrets: []

llmSecrets:
  secretName: "llm-secret"

livenessProbe: {}
readinessProbe: {}
