# Example external secrets configuration for MongoDB
# This file demonstrates how to configure external secrets for MongoDB authentication
#
# Usage:
#   helm install ai-platform-engineering ./charts/ai-platform-engineering \
#     -f ./charts/ai-platform-engineering/charts/mongodb/values-external-secrets.yaml \
#     --set mongodb.enabled=true \
#     --set mongodb.externalSecrets.secretStoreRef.name=your-secret-store
#
# Prerequisites:
#   1. External Secrets Operator installed in your cluster
#   2. SecretStore or ClusterSecretStore configured (Vault, AWS Secrets Manager, etc.)
#   3. Secrets stored in your secret store at the specified paths

externalSecrets:
  enabled: true  # Enable external secrets management
  apiVersion: "v1beta1"
  secretStoreRef:
    name: "vault"  # Replace with your secret store name
    kind: "ClusterSecretStore"  # or "SecretStore" for namespace-scoped
  data:
    # MongoDB root username
    - secretKey: MONGO_INITDB_ROOT_USERNAME
      remoteRef:
        conversionStrategy: Default
        decodingStrategy: None
        key: dev/mongodb  # Path in your secret store
        property: username

    # MongoDB root password
    - secretKey: MONGO_INITDB_ROOT_PASSWORD
      remoteRef:
        conversionStrategy: Default
        decodingStrategy: None
        key: dev/mongodb
        property: password

    # MongoDB database name
    - secretKey: MONGO_INITDB_DATABASE
      remoteRef:
        conversionStrategy: Default
        decodingStrategy: None
        key: dev/mongodb
        property: database

# Example secret store paths for different providers:
#
# Vault:
#   key: "dev/mongodb"  # KV path in Vault
#   Store as: { "username": "admin", "password": "secure-password", "database": "caipe" }
#
# AWS Secrets Manager:
#   key: "dev/mongodb"  # Secret name in AWS
#   Store as JSON: {"username":"admin","password":"secure-password","database":"caipe"}
#
# GCP Secret Manager:
#   key: "projects/PROJECT_ID/secrets/mongodb/versions/latest"
#
# Azure Key Vault:
#   key: "mongodb-credentials"  # Key Vault secret name
