# CAIPE UI Environment Configuration
# Copy this file to .env.local and configure as needed

# ===========================================
# CAIPE Backend Configuration
# ===========================================

# CAIPE A2A endpoint URL
# For local development: http://localhost:8000
# For Docker: http://caipe-supervisor:8000
NEXT_PUBLIC_CAIPE_URL=http://localhost:8000

# RAG Server URL for knowledge base operations
# For local development: http://localhost:9446
# For Docker: http://rag-server:9446
NEXT_PUBLIC_RAG_URL=http://localhost:9446

# ===========================================
# SSO / OIDC Configuration (Optional)
# ===========================================

# Enable SSO authentication
# Set to "true" to enable OIDC authentication, otherwise leave empty or "false"
NEXT_PUBLIC_SSO_ENABLED=false

# NextAuth.js Configuration
# Generate a secret with: openssl rand -base64 32
NEXTAUTH_SECRET=your-secret-here

# Base URL for NextAuth callbacks
# For local development: http://localhost:3000
# For production: https://your-domain.com
NEXTAUTH_URL=http://localhost:3000

# OIDC Provider Configuration
# These are server-side only (not exposed to browser)
OIDC_ISSUER=https://your-oidc-provider.com
OIDC_CLIENT_ID=your-client-id
OIDC_CLIENT_SECRET=your-client-secret

# ===========================================
# Authorization / Group-Based Access Control
# ===========================================

# OIDC claim name containing user groups
# Common values: memberOf, groups, group, roles, cognito:groups
# Leave empty to auto-detect from common claim names
OIDC_GROUP_CLAIM=memberOf

# Required group for access (checked against the group claim)
# Users must be a member of this group to access the application
# Leave empty to disable group-based authorization
OIDC_REQUIRED_GROUP=backstage-access

# Admin group for elevated privileges
# Users in this group will have admin role and access to admin dashboard
# Leave empty to disable admin group checking (all users will be 'user' role)
OIDC_REQUIRED_ADMIN_GROUP=backstage-admins

# Support contact email for access requests and help
# Displayed on unauthorized page and error screens
NEXT_PUBLIC_SUPPORT_EMAIL=support@example.com

# ===========================================
# OIDC Callback URLs to Configure
# ===========================================
#
# When setting up your OIDC provider, add these callback URLs:
#
# For localhost development:
#   http://localhost:3000/api/auth/callback/oidc
#
# For production:
#   https://your-domain.com/api/auth/callback/oidc
#
# ===========================================
# Storage Configuration - MongoDB vs localStorage (EXCLUSIVE)
# ===========================================
#
# IMPORTANT: The app uses ONLY ONE storage mode (not hybrid)
# - MongoDB mode: Persistent, shareable, team collaboration
# - localStorage mode: Browser-only, not shareable
#
# Set MONGODB_URI to enable MongoDB mode
# Leave unset for localStorage mode
# CAIPE UI supports TWO storage modes with automatic fallback:
#
# 1. MongoDB Mode (Recommended for Production)
#    - Persistent storage across devices
#    - Sharing and collaboration features
#    - Server-side search
#    - Set MONGODB_URI and MONGODB_DATABASE below
#
# 2. localStorage Mode (Fallback)
#    - Local browser storage only
#    - No setup required
#    - Great for development and demos
#    - Automatically used if MongoDB not configured
#
# The app automatically detects which mode to use and gracefully
# falls back to localStorage if MongoDB is unavailable.
#

# MongoDB connection string (optional - enables MongoDB mode)
# If not set, app runs in localStorage-only mode
# Example: mongodb://localhost:27017
# Example with auth: mongodb://username:password@localhost:27017?authSource=admin
MONGODB_URI=mongodb://admin:changeme@localhost:27017

# MongoDB database name (required if MONGODB_URI is set)
MONGODB_DATABASE=caipe

# Client-side flag to enable MongoDB mode (required!)
# Set to "true" when MONGODB_URI is configured
# This allows client-side code to detect MongoDB mode without exposing the URI
NEXT_PUBLIC_MONGODB_ENABLED=true

# ===========================================
# Use Case Storage Configuration
# ===========================================
#
# Storage type for use cases (default: "file")
# Options: "file" or "mongodb"
USECASE_STORAGE_TYPE=file

# File-based storage path (only used when USECASE_STORAGE_TYPE=file)
# Default: ./data/usecases.json
# USECASE_STORAGE_PATH=./data/usecases.json

# ===========================================
