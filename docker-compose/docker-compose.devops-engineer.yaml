# ============================================================================
# AUTO-GENERATED FILE - DO NOT EDIT DIRECTLY
# ============================================================================
# Generated by: scripts/generate-docker-compose.py
# Mode: PROD (with container images)
# Personas: devops-engineer
# Transports: a2a-p2p, a2a-over-slim
#
# To regenerate this file, run:
#   make generate-docker-compose PERSONAS="devops-engineer"
#
# Or manually:
#   ./scripts/generate-docker-compose.py --persona devops-engineer
#
# Usage:
#   docker compose -f docker-compose/docker-compose.devops-engineer.yaml --profile a2a-p2p up         # A2A peer-to-peer transport
#   docker compose -f docker-compose/docker-compose.devops-engineer.yaml --profile a2a-over-slim up   # A2A over SLIM transport
# ============================================================================

services:
  caipe-devops-engineer-p2p:
    image: ghcr.io/cnoe-io/ai-platform-engineering:${IMAGE_TAG:-stable}
    container_name: caipe-devops-engineer-p2p
    volumes:
    - ../charts/ai-platform-engineering/data/prompt_config.yaml:/app/prompt_config.yaml
    - ../persona.yaml:/app/persona.yaml
    env_file:
    - ../.env
    ports:
    - 8000:8000
    environment:
    - A2A_TRANSPORT=p2p
    - ARGOCD_AGENT_HOST=agent-argocd-devops-engineer-p2p
    - GITHUB_AGENT_HOST=agent-github-devops-engineer-p2p
    - ENABLE_ARGOCD=true
    - ENABLE_AWS=false
    - ENABLE_BACKSTAGE=false
    - ENABLE_CONFLUENCE=false
    - ENABLE_GITHUB=true
    - ENABLE_JIRA=false
    - ENABLE_KOMODOR=false
    - ENABLE_PAGERDUTY=false
    - ENABLE_SLACK=false
    - ENABLE_SPLUNK=false
    - ENABLE_WEATHER_AGENT=false
    - ENABLE_WEBEX_AGENT=false
    - ENABLE_PETSTORE_AGENT=false
    - ENABLE_RAG=false
    depends_on:
    - agent-argocd-devops-engineer-p2p
    - agent-github-devops-engineer-p2p
    command: platform-engineer
    profiles:
    - a2a-p2p
  agent-argocd-devops-engineer-p2p:
    image: ghcr.io/cnoe-io/agent-argocd:${IMAGE_TAG:-stable}
    container_name: agent-argocd-devops-engineer-p2p
    env_file:
    - ../.env
    ports:
    - 8001:8000
    environment:
    - A2A_TRANSPORT=p2p
    - MCP_MODE=http
    - MCP_HOST=mcp-argocd
    - MCP_PORT=8000
    depends_on:
    - mcp-argocd
    profiles:
    - a2a-p2p
  mcp-argocd:
    image: ghcr.io/cnoe-io/mcp-argocd:${IMAGE_TAG:-stable}
    container_name: mcp-argocd
    env_file:
    - ../.env
    ports:
    - 18024:8000
    environment:
    - MCP_MODE=http
    - MCP_HOST=0.0.0.0
    - MCP_PORT=8000
    profiles:
    - a2a-p2p
    - a2a-over-slim
  agent-github-devops-engineer-p2p:
    image: ghcr.io/cnoe-io/agent-github:${IMAGE_TAG:-stable}
    container_name: agent-github-devops-engineer-p2p
    env_file:
    - ../.env
    ports:
    - 8002:8000
    environment:
    - A2A_TRANSPORT=p2p
    - MCP_MODE=http
    - MCP_HOST=mcp-github
    - MCP_PORT=8000
    depends_on: []
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    profiles:
    - a2a-p2p
  caipe-devops-engineer-slim:
    image: ghcr.io/cnoe-io/ai-platform-engineering:${IMAGE_TAG:-stable}
    container_name: caipe-devops-engineer-slim
    volumes:
    - ../charts/ai-platform-engineering/data/prompt_config.yaml:/app/prompt_config.yaml
    - ../persona.yaml:/app/persona.yaml
    env_file:
    - ../.env
    ports:
    - 8000:8000
    environment:
    - A2A_TRANSPORT=slim
    - ARGOCD_AGENT_HOST=agent-argocd-devops-engineer-slim
    - GITHUB_AGENT_HOST=agent-github-devops-engineer-slim
    - ENABLE_ARGOCD=true
    - ENABLE_AWS=false
    - ENABLE_BACKSTAGE=false
    - ENABLE_CONFLUENCE=false
    - ENABLE_GITHUB=true
    - ENABLE_JIRA=false
    - ENABLE_KOMODOR=false
    - ENABLE_PAGERDUTY=false
    - ENABLE_SLACK=false
    - ENABLE_SPLUNK=false
    - ENABLE_WEATHER_AGENT=false
    - ENABLE_WEBEX_AGENT=false
    - ENABLE_PETSTORE_AGENT=false
    - ENABLE_RAG=false
    depends_on:
    - agent-argocd-devops-engineer-slim
    - agent-github-devops-engineer-slim
    - slim-dataplane
    - slim-control-plane
    command: platform-engineer
    profiles:
    - a2a-over-slim
  agent-argocd-devops-engineer-slim:
    image: ghcr.io/cnoe-io/agent-argocd:${IMAGE_TAG:-stable}
    container_name: agent-argocd-devops-engineer-slim
    env_file:
    - ../.env
    ports:
    - 8001:8000
    environment:
    - A2A_TRANSPORT=slim
    - MCP_MODE=http
    - MCP_HOST=mcp-argocd
    - MCP_PORT=8000
    depends_on:
    - mcp-argocd
    - slim-dataplane
    profiles:
    - a2a-over-slim
  agent-github-devops-engineer-slim:
    image: ghcr.io/cnoe-io/agent-github:${IMAGE_TAG:-stable}
    container_name: agent-github-devops-engineer-slim
    env_file:
    - ../.env
    ports:
    - 8002:8000
    environment:
    - A2A_TRANSPORT=slim
    - MCP_MODE=http
    - MCP_HOST=mcp-github
    - MCP_PORT=8000
    depends_on:
    - slim-dataplane
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock
    profiles:
    - a2a-over-slim
  slim-dataplane:
    image: ghcr.io/agntcy/slim:0.3.15
    container_name: slim-dataplane
    profiles:
    - a2a-over-slim
    ports:
    - 46357:46357
    environment:
    - PASSWORD=${SLIM_GATEWAY_PASSWORD:-dummy_password}
    - CONFIG_PATH=/config.yaml
    volumes:
    - ../slim-config.yaml:/config.yaml
    command:
    - /slim
    - --config
    - /config.yaml
  slim-control-plane:
    image: ghcr.io/agntcy/slim/control-plane:0.0.1
    container_name: slim-control-plane
    profiles:
    - a2a-over-slim
    ports:
    - 50051:50051
    - 50052:50052
    environment:
    - PASSWORD=${SLIM_GATEWAY_PASSWORD:-dummy_password}
    - CONFIG_PATH=/config.yaml
    volumes:
    - ../slim-config.yaml:/config.yaml
    command:
    - /slim
    - --config
    - /config.yaml
