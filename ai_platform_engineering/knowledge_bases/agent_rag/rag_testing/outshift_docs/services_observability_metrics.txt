Grafana
Observability
Prometheus
metrics
Metrics User Guide
¶
Each Kubernetes cluster has a local instance of Prometheus and Grafana. Metrics from applications can be collected and used by these local instances using a
ServiceMonitor
. This is a Custom Resource provided by the Prometheus Operator.
The upstream documentation has
an example
of how to use this setup. So does
the
platform-demo app
.
Cluster Local Metrics
¶
Note
KPS metrics will be stored for 30 days.
What is it for
¶
When should I use this
¶
Recommended
for met
How do I use it
¶
Use the following pod annotation in your deployment template
prometheus.io/scrape:
Long-term SLI Metrics
¶
!!! warning This documentation is deprecated, we are using splunk now for observability
Outshift Platform Kubernetes cluster supports Amazon Managed Prometheus based OpenTelemetry collector, which forwards metrics to Amazon Managed Prometheus for long-term storage.
Note
AMP metrics will be stored for 150 days.
What is it for
¶
Long-term SLI metrics
When should I use this
¶
Recommended
for business metrics
How do I use Pull-based metrics
¶
To implement pull-based metrics using
prometheus_client
, the application needs to implement an API endpoint which will be scraped by the opentelemetry-collector.
Tip
Typically
/metrics
is the convention for prometheus endpoint, but the API endpoint can be any URL like
/api/diagnostics/metrics
or equivalent.
It is recommended to label your metrics with your team name and application name. Follow the
recommended practices for metrics
.
Note
The collector scrapes pods that have the following annotation:
opentelemetry.io/scrape: 'true'
Metrics Endpoint Examples
¶
A good example of a metrics endpoint grabbing all service dependencies and health information (used by WebEx team):
https://locus-a.wbx2.com/locus/api/v1/ping
Visualization  with Grafana
¶
Once metrics are available in cluster-local Prometheus, or Amazon Managed Prometheus they can be used for Grafana dashboard visualization.
Cluster-Local Grafana
¶
Every cluster has a dedicated Grafana instance for cluster-local metrics (Infrastructure metrics). The Grafana endpoints are reachable at
https://observability.<cluster-or-product-name>.<environment>.<domain>.io
. for example:
https://observability.lightspin-staging-1.staging.eticloud.io/
Cluster-Local Dashboarding
Outshift Platform Grafana
¶
A central Grafana for aggregated and centralized metrics is deployed as part of the Amazon Managed Prometheus stack.
Link to access it
.
Central Observability Dashboarding
2025-06-20