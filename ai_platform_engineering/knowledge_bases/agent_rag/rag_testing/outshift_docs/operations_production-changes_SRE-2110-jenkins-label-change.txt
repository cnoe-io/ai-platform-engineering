SRE-2110: Jenkins label change
¶
SRE-2110: Jenkins label change
Preparation Steps
Execute Change
Post-Validation
Roll-Back
Preparation Steps
¶
Create a PR in
eti build infra
Post a message on ETI PLatform status with regards to the build infra changes:
check that the
sre-build-infra common branch
is up to date with develop. If not:
do a git pull rebase from develop on common branch
push the change to origin
cancel the build job
sre-build-infra
in order to not apply any changes for now
Our
team
will
upgrade
the
Jenkins
build
infra
in
order
to
add
more
compute/storage
to
meet
ventures
needs.
The
update
will
be
done
today
at
10am
to
11am
Paris
time.
They
should
not
be
any
downtime
nor
build
issue.
We
will
monitor
changes
and
give
you
updates
if
anything
goes
wrong.
Once
the
upgrade
is
finished,
you
should
get
a
notification
in
this
channel.
Execute Change
¶
Comment the created PR in
Preparation Steps
steps with atlantis apply so that this will apply changes and merge the PR if everything went well.
follow the jenkins build of the
sre-build-infra
Post-Validation
¶
check the nodes configuration
in jenkins
follow the builds to make sure everything is ok
Create a PR in
eti build infra
in order to remove 2 dedicated nodes
disable the 2 nodes in jenkins to make sure no build are running on them before they will be removed
run atlantis apply on the previous PR and run atlantis apply to execute the plan
notify the ETI platform status room that upgrade is done and ask team to get back to us if they see any build issue related to infra changes
put back common/dedicated inventory in develop for sre-build-infra as per these PR
60
&
61
. Do not delete common branch & note this will schedule a develop build following this merge but this will not affect build infra. This is a required step as this inventory is used on develop branch for cleanup.
Roll-Back
¶
If there is something wrong happening during the ansible part, fix those and rerun the build job
sre-build-infra
on the right target.
2023-10-16