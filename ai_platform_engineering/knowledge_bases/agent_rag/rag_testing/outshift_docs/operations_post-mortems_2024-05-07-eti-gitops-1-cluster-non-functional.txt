eti-gitops-1 cluster non-functional
post mortem
2024-05-07; eti-gitops-1 cluster non-functional
¶
Summary
¶
eti-gitops-1 cluster was non-fuctional due to generic user password expiration
When
¶
2024-04-02
Timeline
¶
2024-04-02 - eti-gitops-1.gen expired
2025-05-05 (Sunday) - 0543 EDT - Alon Katz reported Atlantis is not working with scs-tf-infra
2024-05-05 (Sunday) - 1131 EDT - Sri Aradhyula let Alon know that VAULT_TOKEN was expired and needed rotation
2024-05-05 (Sunday) - 1215 EDT - Sri Aradhyula vault token was rotated
2024-05-05 (Sunday) - 1315 EDT - Sri Aradhyula vault noticed that the Atlantis pod wont' come up because the eti-gitops-1.gen password expired.
2024-05-05 (Sunday) - 1341 EDT - Sri Aradhyula rotated the generic password but the Atlantis pod wasn't coming up
2024-05-05 (Sunday) - 1341 EDT - Yevgeniy Ovsyannikov confirmed that the pod was up and running.
Sri thought the problem was resolved
2024-05-06 (Monday) - 1025 EST - Ahmed Ismail reached to Sri Aradhyul that we need to run additional runbook on the cluster after password rotation.
2024-05-06 (Monday) - 1215 EST - Sri asked Ahmed about CSI pods and Ahmed Ismail confirmed that all CSI pods are healthy after restarts.
Ahmed and Sri marked this as resolved incident
2024-05-06 (Monday) - 1215 EST - We missed on step to update the node openstack cloud-cofig. Missed resetting node label dance
2024-05-07 (Tuesday) - 0606 EST - Hana reported atlantis.prod.eticloud.io wasn't working and the PVC are not attached
2024-05-07 (Tuesday) - 0605-0858 EST - Dan, Hana, Shoosh, Matthew Unger got together, identified the node label issue and resolve the problem
Impact
¶
System(s) impacted?
¶
Atlantis Prod
Teams impacted?
¶
SRE
SCS
IAM
Jean - requested tf changes?
Marvin
Impact to Marvin Dev (Eitan) - Hana/Dan were reported?
Limited impact to internal customers.
Run the business impact
No production hot-fix impact.
No impact to external customers.
Analysis
¶
Generic user password expired for month
SRE Prime noticed the issues incidentally not paged via our alets
The playbook was not fully implemented.
Team rallied to fix the issue
Takeaways
¶
Better tracking of our run-the-business password rotation
We did not notify that the change was complete
We had a communication breakdown in understanding the change within the team.
Create an Incident Webex space to engage with team
Better Tools to do incident command
Collect all message into one space
One Incident space vs multiple incident space
More proactive ways for team members to check "Outshift Platform Status"
Add "Outshift Platform Status" to Webex Favorites
Should we trigger incident?
On-call person wasn't paged for this incident?
ServiceDesk
Webex spaces doesn't work?
Missing process?
Ritual?
Every team member takes the responsibility to check "Outshift Platform Status"
A tool/space to understand plaform changes
2024-05-08