Using the ClusterAPI CLI
¶
There are two management clusters setup in P3
Management Clusters
¶
eti-cc
Worker clusters
eti-gitops-1
p3-prod-1
p3-capi-control
Worker clusters:
p3-dev-1
p3-prod-1
eti-gitops-2
eti-gitops-3
p3-capi-control
Pre-requisites
¶
Install
clusterctl
Setup Kube Context
Commands
¶
clusterctl describe cluster <cluster>
clusterctl describe cluster eti-gitops-2
NAME                                                             READY  SEVERITY  REASON  SINCE  MESSAGE
/eti-gitops-2                                                    True                     27d
ââClusterInfrastructure - OpenStackCluster/eti-gitops-2
ââControlPlane - KubeadmControlPlane/eti-gitops-2-control-plane  True                     27d
â ââ3 Machines...                                                True                     27d    See eti-gitops-2-control-plane-d8rs7, eti-gitops-2-control-plane-qd8pf, ...
ââWorkers
ââMachineDeployment/eti-gitops-2-md-0                          True                     46h
ââ3 Machines...                                              True                     27d    See eti-gitops-2-md-0-db466b999-6cngg, eti-gitops-2-md-0-db466b999-m26kq, ...
clusterctl generate cluster <cluster> --kubernetes-version v1.21.9 > <cluster>.yaml
clusterctl get kubeconfig <cluster> > <cluster>.kubeconfig
2023-10-04