add keeper sre vault admin user
remove sre vault admin user
This workflow should only be used to onboard a new SRE admin user by an an existing SRE admin with respective privileges
Add a SRE Vault admin user
¶
Clone the
AD automation repo
Edit the
eticloud-keeper-vault-admin.yaml
file
.
Add the CEC ID of the member you want to add as Vault admin
Commit & PR changes:
git
checkout
-b
new-vault-admin-user
git
add
groups_yaml/teams/sre/eticloud-keeper-vault-admin.yaml
git
commit
-m
"chore: add <NEW_USER> as vault admin"
git
push
origin
new-vault-admin-user
open
https://wwwin-github.cisco.com/eti/sre-cisco-groups-automation/pull/new/new-vault-admin-user
Follow the same process to remove an existing member from the list of Vault admins.
Optional
¶
Set up
Vault CLI
.
Set the namespace to
eticloud
:
export
VAULT_NAMESPACE
=
eticloud
Run the following command:
vault
read
-format
json
auth/oidc/role/vault_admin
|
jq
'.data.bound_claims'
This shoud display the below:
"bound_claims"
:
{
"memberof"
:
[
"CN=eticloud-keeper-vault-admin,OU=Cisco Groups,DC=cisco,DC=com"
]
},
2023-10-13