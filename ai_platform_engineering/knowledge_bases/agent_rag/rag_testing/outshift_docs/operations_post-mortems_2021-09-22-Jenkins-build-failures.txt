2021-09-22-Jenkins-build-failures
¶
When
¶
13:45 PST - 1630 PST
Summary
¶
Jenkins build jobs failing reported down by Sally due to GitHub API rate limits. Sri noticed that Kevin change the password on
sre-1640
and did update the password again to fix the issue.
Timeline
¶
2021-09-22
1145 PST -
eti-sre-cicd.gen@cisco.com
password was rotated in Adam, Jenkins and Keeper
1159 PST - Sent a msg to Jean Diaconu and ask him to check.
1202 PST - Jean Diaconu said "Sure, thank you Kevin" I assumed that he checked and everything was good
1209 PST - Updated
sre-1640
1200 PST - Noon Vault token rotation failed
1300 PST - Kevin left to court
1317 PST -  Sam, "Venture", reported Jenkins build jobs failing due to GitHub API rate limits and Sally started looking into this issue. Sri begins trouble-shooting 15mins after
1450 PST - Sri updated the password and reset the api token and resolved this issue
1600 PST -  Sri David Sally joined the to reinvestigate the issue
1620 PST -  We were able to root cause the issue that caused the GHE api request failures to an undocumented use of the username/password in Jenkins.
####
Impact
\
System(s) impacted?
https://engci-private-sjc.cisco.com/jenkins/eti-sre/job/SRE/job/Projects/job/sre-go-helloworld/job/build/job/sre-go-helloworld/job/master/19/console
âââââââ
¶
(
https://engci-private-sjc.cisco.com/jenkins/eti-sre/)Teams
impacted?
¶
All Jenkins jobs.
Analysis
¶
Our alerting did not let us know that our jenkins jobs was failing.  We failed to document the usage of where log of the password usage.  The review of the change plan was not done properly.   The fact that Kevin got court date at 2pm and left at 1pm after the password change.   We did not have any test failure for this case.
Root causes appears:
the GHE api request failures to an undocumented use of the username/password in Jenkins
Takeaways
¶
Monitoring might need to trigger those specific jenkins job if they fail x amount of times.
Maybe a post-validation step to the password rotation runbook.
Better plan in future with enough time to prepare for unexpected events
Stick with the plan and manual check things until it's working as expected
2022-05-12