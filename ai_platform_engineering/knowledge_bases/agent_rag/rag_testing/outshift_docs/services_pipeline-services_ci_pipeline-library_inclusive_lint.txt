inclusive lint
Inclusive Lint
¶
Inclusive Lint
Overview
Solution details
Metrics
Plugin implementation
Accessing metrics
Dashboard
References
Overview
¶
This document describes the implementation of
inclusive lint
and also the dashboard available in order to visualize all metrics captured within the SRE pipeline.
Solution details
¶
This solution expose metrics such as number of inclusive violation with meta data associated to it such as repo, project / venture.
NOTE
We're currently following the Policy for Approved/Active Replacements in the
Cisco Terminology Recommendations
. With regards to any of the "Recommendations Under Consideration/Advise Against Using" terms, this will be discussed / integrated later.
The SRE pipeline library is currently using a
pushgateway
in order to push metrics to our monitoring stack which is currently a one-eye instance in our p3-prod-1 kubernetes cluster.
Here is a diagram with the current option using plugin & push gateway which aims to be a longer / common approach in the ET&i platform:
Metrics
¶
Here is a sample metric we're pushing to prometheus following the
prometheus data model
:
woke_result{file="CHANGELOG.md:62:24-30", term="master", repo="sre-go-helloworld", project="SRE"} 1
Plugin implementation
¶
Before being upstream, we work on a
fork of woke which is under eti organisation
. Sign-offs contribution can be followed under the
OSC tool
.
We've implemented Prometheus and PushGateway plugin as describe in the
woke documentation
Accessing metrics
¶
Currently, the new plugins are deployed in different clusters as per the
ArgoCD applicationsets
where eks-sre-4 is for development, eks-dev-1 for integration, and p3-prod-1 is used for production (which is the reference of the pipeline library).
To access woke metrics on p3-prod-1, you can use
this link
.
Dashboard
¶
The inclusive dashboard is deployed as part of the
sre-helm-charts
and is currently deployed in the
one-eye instance within the p3-prod-1 cluster
.
As you will see in the dashboard, we're able to see the number of woke result per repo/project and also have some metrics about the plugin operations:
The inclusive dashboard deployment definition is in
inclusive-lint-dashboard-deployment repo
, JSON model is stored in
sre-helm-chart repo
and deployed through Grafana operator (part of one-eye) as per
helm chart definition
.
References
¶
inclusive lint
woke
Terminology Recommendations
2023-01-20