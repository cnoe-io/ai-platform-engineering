2022-01-24 - Access to production one-eye failing
¶
When
¶
Epsagon team noticed that the one-eye was unavailable on Jan 24 during the night
Summary
¶
Access to theÂ
one-eye observability cluster
Â was returning a 500 error.Â Â
Timeline
¶
A detailed timeline of what happened. If possible, down to the minute, with your local timezone specified.
2022-01-24
0355Â EDT - Epsagon team reported that the dashboard was down.
0500Â EDT - SRE team responds and investigation starts.
0847 EDT - SRE noticed that the promerium-authorize pod was in a crash loop backoff state from restarting. (842 times)
0852 EDT - Tried engaging the MCOM team on possible reasons.
1003 EDT - Talked with ex-MCOM engineer and he suggested to restart the 4 pomerium pods.Â  Resolved the issue.
Impact
¶
Teams unable to access the metrics/alerting for the observability cluster
Analysis
¶
Dashboard was working on the 21
st
.Â  During that time, the pomerium-authorize pod (or another pomerium pod) was restarted and this caused the certificate to not be in sync.Â  There is a single ca mounted to each pod andÂ during install it is regenerated once butÂ only one of the pods are restarted by the one-eye install.
Takeaways
¶
Need to add alerting on the URL for the prod dashboard.Â  Also, team needs to engage MCOM support earlier in the process.
2022-05-05