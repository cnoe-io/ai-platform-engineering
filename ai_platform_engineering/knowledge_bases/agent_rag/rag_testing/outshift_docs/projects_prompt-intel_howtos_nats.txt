Outshift Prompt-Intel NATS
¶
This document describes how to debug NATS in the Outshift Prompt-Intel project.
Account Management
Stream Management
Quick Commands
Account Management
¶
The repository
pi-nats
contains the configuration for the NATS account.
Note
: The JWTs stored in this repository are not sensitive secrets.
Full instructions here:
https://wwwin-github.cisco.com/promptintel-ai/pi-nats/blob/main/account-management.md
Stream Management
¶
Full instructions here:
https://wwwin-github.cisco.com/promptintel-ai/pi-nats/blob/main/stream-management.md
Quick Commands
¶
Using the auth token from the vault:
¶
kubectl
-n
ppu-dev
port-forward
a-pi-nats-dev-app-0
4444
:4222
&
Check
Vault
under
/secret/<environment>/backend/NATS_AUTH_TOKEN
# Export
nats
stream
info
PROMPT
-j
>
/tmp/stream.json
nats
consumer
info
PROMPT
PROMPT-archiver-business
-j
>
/tmp/PROMPT-archiver-business.json
nats
consumer
info
PROMPT
PROMPT-archiver-customer
-j
>
/tmp/PROMPT-archiver-customer.json
nats
consumer
info
PROMPT
PROMPT-roi-completion
-j
>
/tmp/PROMPT-roi-completion.json
nats
consumer
info
PROMPT
PROMPT-roi-prompt
-j
>
/tmp/PROMPT-roi-prompt.json
# Import
nats
stream
create
--config
/tmp/stream.json
nats
consumer
create
PROMPT
--config
/tmp/PROMPT-archiver-customer.json
nats
consumer
create
PROMPT
--config
/tmp/PROMPT-archiver-business.json
nats
consumer
create
PROMPT
--config
/tmp/PROMPT-roi-completion.json
nats
consumer
create
PROMPT
--config
/tmp/PROMPT-roi-prompt.json
# Restart
kubectl
-n
ppu-dev
rollout
restart
deploy
a-pi-backend-dev-app-processing
kubectl
-n
ppu-dev
rollout
restart
deploy
a-pi-backend-dev-app-archiver-business
kubectl
-n
ppu-dev
rollout
restart
deploy
a-pi-backend-dev-app-archiver-customer
kubectl
-n
ppu-dev
rollout
restart
deploy
a-pi-backend-dev-app-roi-completion
kubectl
-n
ppu-dev
rollout
restart
deploy
a-pi-backend-dev-app-roi-prompt
Using generated creds:
¶
nats
--creds
/tmp/creds
stream
info
PROMPT
-j
>
/tmp/stream.json
nats
--creds
/tmp/creds
consumer
info
PROMPT
PROMPT-archiver-business
-j
>
/tmp/PROMPT-archiver-business.json
nats
--creds
/tmp/creds
consumer
info
PROMPT
PROMPT-archiver-customer
-j
>
/tmp/PROMPT-archiver-customer.json
nats
--creds
/tmp/creds
consumer
info
PROMPT
PROMPT-roi-completion
-j
>
/tmp/PROMPT-roi-completion.json
nats
--creds
/tmp/creds
consumer
info
PROMPT
PROMPT-roi-prompt
-j
>
/tmp/PROMPT-roi-prompt.json
nats
--server
nats://PfB0IRbKn22JUMA5OHOTAVbOesViRIhB@localhost:4222
stream
create
--config
/tmp/stream.json
nats
--server
nats://PfB0IRbKn22JUMA5OHOTAVbOesViRIhB@localhost:4222
consumer
create
PROMPT
--config
/tmp/PROMPT-archiver-customer.json
nats
--server
nats://PfB0IRbKn22JUMA5OHOTAVbOesViRIhB@localhost:4222
consumer
create
PROMPT
--config
/tmp/PROMPT-archiver-business.json
nats
--server
nats://PfB0IRbKn22JUMA5OHOTAVbOesViRIhB@localhost:4222
consumer
create
PROMPT
--config
/tmp/PROMPT-roi-completion.json
nats
--server
nats://PfB0IRbKn22JUMA5OHOTAVbOesViRIhB@localhost:4222
consumer
create
PROMPT
--config
/tmp/PROMPT-roi-prompt.json
2024-07-15