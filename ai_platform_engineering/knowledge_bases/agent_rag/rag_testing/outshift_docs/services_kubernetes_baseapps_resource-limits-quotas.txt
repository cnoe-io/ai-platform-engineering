How-to setup resource-limits-quotas in k8s
¶
Overview
¶
Resource Requests
¶
In Kubernetes, Pods can request how much of each resource a Container needs.
Resources of interest are
- CPU
- Memory
- Ephemeral Storage
Resource Limits
¶
Definition:
If the node where a Pod is running has enough of a resource available, it's possible (and allowed) for a container to use more resource than its request for that resource specifies. However, a container is not allowed to use more than its resource limit.
Note
SRE team setups default resource limits for baseapps
Resource Quotas
¶
Definition:
A resource quota, defined by a ResourceQuota object, provides constraints that limit aggregate resource consumption per namespace. It can limit the quantity of objects that can be created in a namespace by type, as well as the total amount of compute resources that may be consumed by resources in that namespace.
Note
ETI Platform doesn't currently enforce resource quotas
Install imagepullsecrets as baseapp
¶
Installation Guide
SRE imagepullsecrets helm chart
¶
SRE team customized the upstream helm chart
sre-helm-charts/resource-limits-quotas
.
âââ Chart.yaml
âââ templates
â     âââ resource-limits.yaml
â     âââ resource-quotas.yaml
âââ values.yaml
resource-limits.yaml:
Resource Limits definitions per namespace
resource-quotas.yaml:
Resource Quotas definitions per namespace
ChartMuesuem UI
sre-cluster-configs for resource-limits-quotas
ArgoCD resource-limits-quotas-private applicationsets
Further Reading:
¶
Kubernetes docs: Managing Resources for Containers
2023-09-03