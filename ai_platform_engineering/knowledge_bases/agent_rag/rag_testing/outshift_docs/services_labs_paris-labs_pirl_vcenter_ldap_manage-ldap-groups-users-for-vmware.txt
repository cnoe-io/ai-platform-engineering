Managing LDAP groups & users for PIRL vCenter
¶
VMware requirements for OpenLDAP users & group
¶
Currently, vCenter Single Sign-On supports the use of OpenLDAP as an identity source only if it satisfies all of these requirements:
- The OpenLDAP schema is RFC4519 compliant.
- All users have an objectClass of inetOrgPerson.
- All groups have an objectClass of groupOfUniqueNames.
- All groups have a group membership attribute of uniqueMember.
- All users and group objects have entryUUID configured (The objects have a unique GUID and should not be changing)
Learn more
Here
Howtos
¶
Add groups to the LDAP DIT using LDIF file
¶
SSH to the
PIRL LDAP server
Access the LDIF files directory
localadmin@pirl-ldap-kvm:~$
cd
ldif_files/
localadmin@pirl-ldap-kvm:~/ldif_files$
ls
add_group.ldif
add_users.ldif
sudoder.ldif
sudoers.ldif
Open and update the existing ldif file template
add_group.ldif
which meets the VMware LDAP group requirements as shown below:
dn:
cn
=
group1,ou
=
Groups,dc
=
pirl,dc
=
lab
objectClass:
groupOfUniqueNames
uniqueMember:
uid
=
user1,ou
=
People,dc
=
pirl,dc
=
lab
uniqueMember:
uid
=
user2,ou
=
People,dc
=
pirl,dc
=
lab
uniqueMember:
uid
=
user3,ou
=
People,dc
=
pirl,dc
=
lab
cn:
group1
Save the file
Type the command below to add the group to the LDAP DIT:
localadmin@pirl-ldap-kvm:~/ldif_files$
ldapadd
-x
-W
-D
"cn=admin,dc=pirl,dc=lab"
-f
add_users_people.ldif
Enter the
LDAP server password
Add users to the LDAP DIT using phpLDAPadmin Web Interface
¶
This is the easiest approach that you can also create groups from the phpldapadmin interface by
copying
one of the user groups already exist in the DIT
Access the
phpldapadmin web interface
. Find the access secrets in
Keeper
Select a user under
People
then click on
Copy or move this entry
In the
Destination DN
line
change the user ID (uid)
then click on
copy
In the next page change the user attributes then click on
Create object
and
Commit
Add the new created user to a group so that he can have access to the VMware resources of this particular group in the vCenter
Add the user
to the
vcusers-common
group so that he can have access to the shared resources in the vCenter
Change the vCenter Admin password
¶
Access the
vCenter vSphere client
, using the
Global admin credentials
Select the drop-down menu under
administrator@VSPHERE.local
in the top/right corner as shown below:
Click on
Change Password
Change your user password
¶
We use the
ETI-PIRL-LDAP-Client
VM as an Ubuntu bastion host to allow users to change their passwords:
ssh your_username@10.60.17.207
Change your password using the 'passwd`command
Access the vCenter vSphere Client using your LDAP credentials
¶
Access the PIRL
vCenter vSphere client
Type
your_CEC_ID@pirl.lab
or
PIRL.LAB\your_CEC_ID
as your username
Enter your
password
Click on
Login
Configure Permissions on the PIRL vCenter components
¶
Access the
pirl-vcenter
Select a component then click on
Permissions
tab
Click on
add
Select
pirl.lab
as a domain, type the
group
that you want to provide access to the vCenter component then select the
role
to provide to the group
2023-02-23