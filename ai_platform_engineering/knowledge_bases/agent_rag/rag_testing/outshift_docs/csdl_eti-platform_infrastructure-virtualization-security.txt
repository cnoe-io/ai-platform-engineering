Infrastructure and Virtualization Security
¶
Table of Contents
¶
Log Management Tool
¶
CCF: IVS-01.01
Cloud audit logs are centralized by ST&O.
Infrastructure and application logs are consolidated using Cisco Cloud Observability.
Detail
Intrusion Detection System
¶
CCF: IVS-01.04
(#todo: describe IDS)
Clock Synchronization
¶
CCF: IVS-03.01
All of the SRE Platform instances use Amazon's Time Sync Service. It's clock error bounds are typically within 2ms. However, this rate is only within a region and there is not cross-region time synchronicity.
Firewalls and Security Groups
¶
CCF: IVS-06.01
By default, every VPC denies direct access to compute resources via security group.
SSH access is allowed to a bastion host from Cisco CIDR's only.
Security groups allow unrestricted access internally.
Security groups control access from EKS VPC's to database VPC's.
CCF: IVS-06.02
Review of network access (such as network policies) is conducted on an annual basis, and is stored in the
Access Review folder
(#todo: add links to VPC security group code)
Network Segmentation
¶
CCF: IVS-09.01
Within an AWS account, EKS VPCs are not directly connected
2
. There is not a way for two VPCs or EKS clusters to communicate except via the public internet.
If an application team or teams need to have direct communication between two EKS VPCs, the Outshift SRE team will work to enable them technically and the exceptions will be documented in both the Platform CSDL documents and the application team(s)' CSDL documents.
Each VPC has its a primary RFC1918 /16 network that is separated into 3 /24 subnets, each in a different availability zone. Some VPCs have a secondary CIDR of
100.64.0.0/16
for additional IP space.
Production VPCs
¶
VPC Inventory
Peered VPC examples
¶
eks-prod-1 VPC Terraform
eks-prod-2 VPC Terraform
prod-db-vpc-1 VPC Terraform
eks-prod-1 to prod-db-vpc-1 VPC Peering
eks-prod-2 to prod-db-vpc-1 VPC Peering
Unpeered VPC example
¶
eti-mc-1 VPC Terraform
Production and Non-Production systems separation
¶
CCF: IVS-09.03
The Outshift Platform separates production (prod) and preproduction (preprod, stage|staging, test, dev) environments.
RunOn tenant separation
¶
The Outshift Platform has two RunOn tenants:
ETI SRE - 9614ebaf-d43f-9354-e54d-36e54dacfd62
- for preproduction resources.
1
ETI SRE PROD - 904b00e6-89d4-bdd1-7c42-e797c27891e5
- for production resources.
AWS account separation
¶
Production resources and applications are deployed to one of two AWS accounts:
eticloud
-
626007623524
lightspin-prod
-
145875358567
There are some preproduction applications deployed to the eticloud account and the Outshift SRE team is working to migrate them to the
eticloud-preproduction
AWS account.
AWS account role separation
¶
IAM roles within AWS accounts are currently under review and this section will be updated.
VPC separation
¶
See
network segmentation
Kubernetes internal separation
¶
Within an EKS cluster, there are multiple levels and methodologies of networking, namespace, and role-based access isolation available. The Outshift SRE team is actively working on tightening those restrictions.
Secrets separation
¶
All secrets are stored in
Keeper
. Each application team has its own sub-namespace. Within the applicaton team's namespace, secrets for environments (production, staging, etc.) are stored indivdiually.
Access to those namespaces are controlled by Active Directory groups.
Notes
¶
Build and deploy resources and applications are installed in the ETI SRE tenant. Those should be covered by the
Plaform Build Environment Security
assessment.
There are VPC Peering connections between EKS VPCs and RDS VPCs. However, the routing tables and security group setting do not allow EKS VPCs which are connected to the same RDS VPC to communicate directly.
Network Diagrams
¶
CCF: IVS-13.01
The Outshift SRE team has several different possibilities for implementing our VPC design.
EKS VPC
Peered EKS VPC
EKS VPC with secondary CIDR
1
Implementation of the VPC design is described in code in the
VPC Terraform module
.
Denial of Service Mitigation
¶
CCF: IVS-13.02
The Outshift SRE team utilizes
AWS Cloudfront
as a Content Distribution Network.
Tightly integrated with Cloudfront is
AWS Shield Standard
for Distributed Denial of Service (DDoS) attacks; the Standard edition of AWS Shield only provides defense against the most common, frequently occurring network and transport layer DDoS attacks and does not offer protection from application layer (layer 7) attacks.
Currently, Shield Advanced is not enabled for Outshift SRE built Cloudfront Distributions.
A review of SRE provided infrastructure should occur with every Platform and application CSDL assessment.
Publishing Systems Protection
¶
CCF: IVS-13.03
The Outshift SRE team has implemented
AWS Web Application Firewall
(WAF) on some of its Cloudfront implementations to ensure we are properly complying with United State federal government global export restrictions. To that end, we have subscribed to
Threatstop's ITAR and OFAC rules
.
However, the Outshift SRE team has not implemented other WAF rulesets to mitigate publishing systems threats.
A review of SRE provided publishing infrastructure should occur with every Platform and application CSDL assessment.
2024-04-04