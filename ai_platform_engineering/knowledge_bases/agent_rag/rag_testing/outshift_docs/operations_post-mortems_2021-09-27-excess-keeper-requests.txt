2021-09-27-excess-keeper-requests
¶
When
¶
Reported at 2021-09-27, 2123 CST (0223 GMT)
Summary
¶
Keeper team reported excessive usage from eticloud namespace specifically the logs pointed at a component external-secret in kubernetes clusters
Background
¶
Emerging Tech & Incubation (ETI) SRE team uses keeper to manage secrets management.
ETI SRE  team uses a kubernetes operator
https://external-secrets.io
to manage secrets for kubernetes services
Timeline
¶
1358 CEST: PeterW of Appnet reported that Jenkins was non functional.
1358-1406 CEST: Matt and David confirmed outage.
1406 CEST: Matt opened a
case with EngIT
1418 CEST: EngIT restarted the Jenkins master
1421 CEST: Peter W reports UI is functional, but jobs are not running.
1511 CEST: Sri has deleted enough jobs out of workspaces on the master node to get jobs running again.
Impact(s)
¶
Builds unavailable for an hour for any teams.
Analysis
¶
Cause:
¶
Jobs being saved by AppNet consume 200+ GB of disk on a 300GB disk.
No alerts on Jenkins' primary going offline.
Tactical fixes:
¶
Restart of Jenkins primary process.
Manual cleaning of workspaces.
Actions items:
¶
SRE team to improve monitoring of Jenkins' primary.
SRE-1538
SRE team to improve cleaning of Venture workspaces.
SRE-1546
Update escalation documentation in
PagerDuty playbook for Jenkins
.
SRE-1562
Update Jenkins to not run Venture jobs on the Primary.
SRE-1561
Determine course of action if Venture starts to cause warnings
How long do we wait for Venture remediation versus SRE taking action?
2022-05-27