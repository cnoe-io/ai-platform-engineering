SJC09 Infrastructure services in varan host
¶
SJC09 lab has many infrastructure services running locally in the lab, such as LDAP and DNS servers. One of those infra-holding hosts is
varan
, that's hosting NS1 and NS2 LXC containers in which of both the DNS and LDAP services are running on. See
varan
layout in the
lab architecture page
at container to host mapping section.
How to access to
varan
¶
Get the private-key and username in
vault
Explore LXC containers in
varan
¶
Most of the services in
varan
infra-host are using LXC containerization technology, specifically as this host is running on an old ubuntu version (
ubuntu14
) the current/newer LXC commands might not work and the old LXC
commands
must be used.\
Essential commands to see what's running in where.
- List all LXC containers
  -
lxc-ls --fancy
- Get more information from a specific container
  -
lxc-info --name container-name
- Start and stop containers
  -
lxc-start --name container-name (--daemon)
-
lxc-stop --name container-name
SJC09 Nameservers:
-
gspie-ns1
-
gspie-ns2
SJC09 DHCP-Servers:
- General lab dhcp-server
  -
gspie-mothra
, leases IP addresses based on mac-address and does not provide dynamic lease.
- vmware-env dhcp-server
  -
eti-sj9-dhcp-server
, provides free lease and intended to use for vmware automation.
Infra-services config files backup
¶
Archived SJC09 lab dhcp-server, ldap and dns services config files and encrypted it with
gpg
symmetric passphrase algorithm.
How it's being encrypted
¶
gpg --passphrase $passphrase --batch --output filename.tgz.gpg --symmetric --cipher-algo AES256  filename.tar.gz
Decrypt the backup data
¶
Get the passphrase from
vault
and export it as an environment variable.
export passphrase= "the-passphrase"
Download the backup files into your local machine and issue the below command to decrypt it.
gpg --batch --passphrase $passphrase --output filename.tgz --decrypt  filename.tgz.gpg
Finally, to see the backup files contents, extract the tar file.
tar -xzvf filename.tgz
2023-09-21