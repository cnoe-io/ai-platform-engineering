add new ad group to automation
add yaml to sre-cisco-groups-automation
Add a new AD group to automation
¶
Note
Before adding your group to the repository. Please verify that the following pre-requisites are taken care of.
- The group has been created via
Cisco Groups UI
-
frontline.gen
user has been be added as an owner to the group
Step 1: Clone the automation repo
¶
Clone the automation repository and create a new branch:
git
clone
git@github.com:cisco-eti/sre-cisco-groups-automation.git
cd
sre-cisco-groups-automation
git
checkout
-b
add-my-group
Step 2: Create an empty YAML Config
¶
Note
This method is an
optimization
to avoid manually entering all the group information into yaml file before commiting to the repo
Create a new
MY_GROUP.yaml
(
MY_GROUP
should be the exact group name) file under the
groups_yaml
with the following content:
Note:
Follow the
directory structure
outlined to place the yaml in the appropriate directory.
MY_GROUP.yaml
:
group_description
:
Empty YAML
member_users
:
[]
member_groups
:
[]
owner_users
:
[]
owner_groups
:
[]
Step 3: Commit and PR
¶
Commit and push your changes and open a PR on GitHub:
git
add
supported_groups.yaml
groups_yaml/MY_GROUP.yaml
git
commit
-m
'chore: add MY_GROUP #SKIPSTAGES'
git
push
-u
origin
add-my-group
Caution
#SKIPSTAGES
keyword is important in the commit message for this approch to work
Wait for the SRE team to review and merge your changes.
The repository is managed by the SRE team, meaning all changes must be approved and merged by them.
Note
If you are using
Squash and Merge
option, Please make
#SKIPSTAGES
keyword is present in the commit message for this approch to work
Step 3: Run SYNC Job with DO_NOT_SKIP_STAGES
¶
Run the
Jenkins Job with Params
with
SYNC
option with
DO_NOT_SKIP_STAGES
checked. Note that using 5 parallel jobs may result in failures, you may want to use 3 instead.
2023-10-05